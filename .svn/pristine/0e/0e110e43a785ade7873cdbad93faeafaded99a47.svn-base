import{r as M,a as z,o as Z,g as k,b as V,c as j,h as e,i as t,m as u,t as m,u as ue,G as me,J as fe,j as Se,K as B,P as G,F as re,D as ce,I as de,k as pe,N as Te,l as Y,E as v,R}from"./index-93018481.js";import{a as K,h as U}from"./util-e879685f.js";import{z as ee,_ as X}from"./ZDialog-43cdd841.js";import{h as A}from"./moment-da921422.js";import{d as Q}from"./fileUtil-a1d39237.js";import{_ as Ve}from"./uploadAttachment-04d897fd.js";import{_ as ye}from"./_plugin-vue_export-helper-361d09b5.js";const Ce={class:"all-height flex-column"},Ie={__name:"potential_selectCorpForTrack",props:{condobj:Object},setup(x){const i=x,h=M(),F=z({isRadio:!0,httpAttribute:{url:"/crm/potentialclient/potentialclient!selectCorpListByCond.action",root:"potentialclientInfos",baseParams:{"cond.auditflag":"0"}},tableColumns:[{type:"selection",width:"40"},{title:"\u5BA2\u6237ID",label:"companycorpidtitle",prop:"corpid",type:"id",width:"60",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"columnCustomerName",prop:"corpdesc",type:"Input"},{title:"\u82F1\u6587\u540D\u79F0",label:"hotlinkpanelywmctitle",prop:"corpenglishname",type:"Input",width:"180"},{title:"\u522B\u540D",label:"corpinfopanelbmtitle",prop:"corpalias",type:"Input",width:"160"},{title:"\u7535\u5B50\u90AE\u4EF6",label:"corpinfopanelbmtitle",prop:"corpinfopanelemailtitle",type:"Input",width:"160"},{title:"\u5730\u5740",label:"columnAddress",prop:"corplocation",type:"Input"},{title:"newcustomtype",label:"",prop:"newcustomtype",type:"Input",width:"160",isHide:!0}],tableData:[]});Z(()=>{h.value.getTableList()});const $=(g,C)=>{i.condobj.arrayList=C,i.condobj.dialogShow=!1};return(g,C)=>{const p=k("el-button");return V(),j("div",Ce,[e(ee,{ref_key:"zTable1",ref:h,tableList:F},{tableHeaderLleft:t(l=>[e(p,{size:"small",type:"primary",icon:"Finished",plain:"",disabled:!l.isSelected,onClick:H=>$(l.ids,l.selectList)},{default:t(()=>[u(m(g.$t("buttoncommonconfirm")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["tableList"])])}}};const $e={class:"all-height flex-column"},De={style:{margin:"10px","text-align":"right"}},Le={__name:"potential_track_detail_new",props:{condobj:Object},setup(x){const i=x,h=ue(),F=me(),$=M(!0),g=M(!0),C=M(!0),p=M(),l=z({corpid:"",commid:i.condobj.commid,companyname:"",corpno:"",approvalstc:"",laboratoryfocus:"",pastyearcosts:0,cooperationlabs:"",commtime:"",commtype:"",commway:"",position:"",remindertime:"",commclient:"",followsituation:"",nextfollowup:"",informationSource:"",mainproducts:"",testproject:"",reocrdercode:"",recordercodetwo:"",recordertimetwo:"",state:""});(!l.commid||i.condobj.statusType=="new")&&(C.value=!1);const H=K("customer_informationsource"),N=[{label:"corpinfopanelcontacttitle0",value:"0"},{label:"corpinfopanelcontacttitle1",value:"1"},{label:"corpinfopanelcontacttitle2",value:"2"},{label:"corpinfopanelcontacttitle3",value:"3"},{label:"corpinfopanelcontacttitle4",value:"4"}],S=z({dialogShow:!1,arrayList:[]}),O=()=>{S.arrayList=[],S.dialogShow=!0},E=()=>{S.arrayList.length>0&&(l.corpid=S.arrayList[0].corpid,l.corpno=S.arrayList[0].corpno,l.companyname=S.arrayList[0].corpdesc)},J=async()=>{let a={"cond.commid":l.commid};const o=await U.post("/mylims/trackinfo/track!selectTrackInfoById.action",Y.stringify(a));c(o),_()},W=a=>{!a||a.validate(async(o,w)=>{if(o){let I={trackInfo:l},b={jsonString:JSON.stringify(I),"cond.corpid":l.corpid};const d=await U.post("/mylims/trackinfo/track!saveTrackInfoPotential.action",Y.stringify(b));d&&(v.success(h.t("Message_saveSuccess")),i.condobj.success=!0,c(d),_())}else v.warning(h.t("message_form_validation"))})},c=a=>{for(let o in a.trackInfo[0])Object.keys(l).includes(o)&&(o=="pastyearcosts"?l[o]=a.trackInfo[0][o]*1:l[o]=a.trackInfo[0][o])},_=()=>{let a=A().format("YYYY-MM-DD"),o=A(new Date(l.recordertimetwo)).format("YYYY-MM-DD"),w=F.userInfo.usercode;l.reocrdercode==w&&a==o?(g.value=!0,$.value=!0):($.value=!1,g.value=!1)},s=()=>{l.commid&&Q("/mylims/trackinfo/track!trackDownloadWord.action","Track.doc",{commid:l.commid})},f=()=>{T("/mylims/trackinfo/track!selectPreviousTrackInfo.action")},r=()=>{T("/mylims/trackinfo/track!selectNextTrackInfo.action")},T=async a=>{if(l.commid){let o={commid:l.commid};const w=await U.post(a,Y.stringify(o));c(w),_()}},P=M(),te=z({isRequest:!0,tableToolbar:{right:!1},httpAttribute:{url:"/core/upload/upload!selectfilesInfoByCond.action",root:"fileInfos",baseParams:{"cond.reservnum":l.commid}},tableColumns:[{type:"selection",width:"40"},{title:"id",label:"id",prop:"fileid",type:"id",width:"60",isHide:!0},{title:"\u6587\u6863\u540D\u79F0",label:"columnjxFileName",prop:"filename",type:"Link"},{title:"\u6587\u6863\u5927\u5C0F",label:"companypanel3filesizetitle",prop:"filesize",type:"Input",width:"160"},{title:"\u6269\u5C55\u540D",label:"companypanel3extensiontitle",prop:"extension",type:"Input",width:"120"},{title:"\u4E0A\u4F20\u7528\u6237",label:"columnUploadUser",prop:"recorderdesc",type:"Input",width:"120"},{title:"\u4E0A\u4F20\u65F6\u95F4",label:"columnUploadTime",prop:"recordertime",type:"Input",width:"300"},{title:"mdmfileid",label:"",prop:"mdmfileid",type:"Input",width:"300",isHide:!0},{title:"businesstype",label:"",prop:"businesstype",type:"Input",width:"120",isHide:!0}],tableData:[]}),D=z({uploadUrl:"",uploadParameter:{},dialogShow:!1,success:!1}),be=()=>{D.uploadUrl="http://localhost:3000/apis/core/uploadnew/upload!upload.action",D.uploadParameter={jsonString:"{uploadFile:{businesscode:'CRM/accessory', businessobjectid:'"+l.commid+"'}}","cond.commid":l.commid},D.success=!1,D.dialogShow=!0},_e=()=>{D.success&&P.value.getTableList()},we=(a,o)=>{Q("/core/uploadnew/upload!download.action",o.filename,{"cond.crm":"crm","cond.fileid":o.fileid})},ge=(a,o)=>{R.confirm(h.t("Message_Confirmdelete"),h.t("reminder"),{confirmButtonText:h.t("menu_ok"),cancelButtonText:h.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let w={fileInfos:[]};o.forEach(d=>{w.fileInfos.push({fileid:d.fileid,mdmfileid:d.mdmfileid})});let I={jsonString:JSON.stringify(w),"cond.crm":"crm"};await U.post("/core/uploadnew/upload!deleteUploadFileInfo.action",Y.stringify(I))&&(v({type:"success",message:h.t("Message_deleteSuccess")}),P.value.getTableList())})},le=M(0),q=new Map([[1,!1]]),ke=a=>{g.value&&($.value=a==0),l.commid&&(te.httpAttribute.baseParams["cond.reservnum"]=l.commid,i.condobj.statusType=="edit"&&(C.value=a==0),q.get(a)?P.value.reuseTableList():q.set(a,!0))};return Z(()=>{l.commid&&J()}),(a,o)=>{const w=k("el-button"),I=k("el-divider"),b=k("el-input"),d=k("el-form-item"),y=k("el-col"),L=k("el-row"),oe=k("el-date-picker"),ae=k("el-option"),ne=k("el-select"),ve=k("el-form"),ie=k("el-tab-pane"),he=k("el-tabs"),se=fe("dialogStretching");return V(),j("div",$e,[Se("div",De,[B(e(w,{size:"small",type:"primary",icon:"Document",plain:"",onClick:o[0]||(o[0]=n=>W(p.value))},{default:t(()=>[u(m(a.$t("menu_save")),1)]),_:1},512),[[G,$.value]]),B(e(w,{size:"small",type:"info",icon:"ArrowLeft",plain:"",onClick:f},{default:t(()=>[u(m(a.$t("SRM_btnPrevious")),1)]),_:1},512),[[G,C.value]]),B(e(w,{size:"small",type:"info",icon:"ArrowRight",plain:"",onClick:r},{default:t(()=>[u(m(a.$t("SRM_btnNext")),1)]),_:1},512),[[G,C.value]]),e(w,{size:"small",type:"primary",icon:"Download",plain:"",onClick:s},{default:t(()=>[u(m(a.$t("SRM_btnDownload")),1)]),_:1})]),e(he,{class:"flex-column flex-1",style:{overflow:"auto"},modelValue:le.value,"onUpdate:modelValue":o[19]||(o[19]=n=>le.value=n),type:"border-card",onTabChange:ke},{default:t(()=>[e(ie,{title1:"\u8FFD\u8E2A\u8BB0\u5F55",label:a.$t("corpinfoTrackrecordtitle"),name:0},{default:t(()=>[e(ve,{style:{margin:"0px 15px"},"label-position":"right","label-width":"120px",model:l,ref_key:"ruleFormRef",ref:p},{default:t(()=>[e(I,{title1:"\u8FFD\u8E2A\u5BA2\u6237","content-position":"left"},{default:t(()=>[u(m(a.$t("corpinfoTrackcustomertitle")),1)]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(d,{title1:"\u5BA2\u6237\u540D\u79F0",label:a.$t("fieldcolumncustomername")},{default:t(()=>[e(b,{type:"text",modelValue:l.companyname,"onUpdate:modelValue":o[1]||(o[1]=n=>l.companyname=n),modelModifiers:{trim:!0},readonly:""},{append:t(()=>[e(w,{icon:"Search",onClick:O})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(I,{title1:"\u57FA\u672C\u60C5\u51B5","content-position":"left"},{default:t(()=>[u(m(a.$t("companyBasicsituationtitle")),1)]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(d,{title1:"\u5BF9STC\u8BA4\u53EF\u5EA6",label:a.$t("companyapprovalstctitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.approvalstc,"onUpdate:modelValue":o[2]||(o[2]=n=>l.approvalstc=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u9009\u62E9\u5B9E\u9A8C\u5BA4\u6700\u5173\u6CE8\u4EC0\u4E48",label:a.$t("companylaboratoryfocustitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.laboratoryfocus,"onUpdate:modelValue":o[3]||(o[3]=n=>l.laboratoryfocus=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8FC7\u5F80\u4E00\u5E74\u7684\u68C0\u6D4B\u8D39\u7528",label:a.$t("companypastyearcoststitle"),prop:"pastyearcosts",rules:[{type:"number",message:a.$t("mustbeanumber")}]},{default:t(()=>[e(b,{type:"text",modelValue:l.pastyearcosts,"onUpdate:modelValue":o[4]||(o[4]=n=>l.pastyearcosts=n),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u4E0E\u5176\u4ED6\u5B9E\u9A8C\u5BA4\u7684\u5408\u4F5C\u60C5\u51B5",label:a.$t("companycooperationlabstitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.cooperationlabs,"onUpdate:modelValue":o[5]||(o[5]=n=>l.cooperationlabs=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(I,{title1:"\u8DDF\u8E2A\u4FE1\u606F","content-position":"left"},{default:t(()=>[u(m(a.$t("corpinfoTrackinginformationtitle")),1)]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8054\u7CFB\u65F6\u95F4",label:a.$t("companyContactTimetitle")},{default:t(()=>[e(oe,{modelValue:l.commtime,"onUpdate:modelValue":o[6]||(o[6]=n=>l.commtime=n),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8054\u7CFB\u7C7B\u522B",label:a.$t("companyContactClasstitle")},{default:t(()=>[e(ne,{modelValue:l.commtype,"onUpdate:modelValue":o[7]||(o[7]=n=>l.commtype=n),class:"full-width-input"},{default:t(()=>[(V(),j(re,null,ce(N,n=>e(ae,{key:n.value,label:a.$t(n.label),value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8054\u7CFB\u65B9\u5F0F",label:a.$t("corpinfopanelcontacttitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.commway,"onUpdate:modelValue":o[8]||(o[8]=n=>l.commway=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u804C\u4F4D",label:a.$t("companypositiontitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.position,"onUpdate:modelValue":o[9]||(o[9]=n=>l.position=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(d,{title1:"\u4E0B\u6B21\u8DDF\u8FDB\u63D0\u9192\u65F6\u95F4",label:a.$t("columnremindertime")},{default:t(()=>[e(oe,{modelValue:l.remindertime,"onUpdate:modelValue":o[10]||(o[10]=n=>l.remindertime=n),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8054\u7CFB\u4EBA",label:a.$t("columnContactPerson")},{default:t(()=>[e(b,{type:"text",modelValue:l.commclient,"onUpdate:modelValue":o[11]||(o[11]=n=>l.commclient=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:12},{default:t(()=>[e(d,{title1:"\u52A8\u6001\u8DDF\u8FDB\u60C5\u51B5",label:a.$t("companyfollowsituationtitle")},{default:t(()=>[e(b,{type:"textarea",modelValue:l.followsituation,"onUpdate:modelValue":o[12]||(o[12]=n=>l.followsituation=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:12},{default:t(()=>[e(d,{title1:"\u8FDB\u4E00\u6B65\u8DDF\u8FDB\u65B9\u6CD5/\u52A8\u4F5C",label:a.$t("columncustomernextfollow")},{default:t(()=>[e(b,{type:"textarea",modelValue:l.nextfollowup,"onUpdate:modelValue":o[13]||(o[13]=n=>l.nextfollowup=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(I,{title1:"\u9879\u76EE\u4FE1\u606F","content-position":"left"},{default:t(()=>[u(m(a.$t("corpinfoProjectinformationtitle")),1)]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(d,{title1:"\u4FE1\u606F\u6765\u6E90",label:a.$t("companyinformationSourcetitle")},{default:t(()=>[e(ne,{modelValue:l.informationSource,"onUpdate:modelValue":o[14]||(o[14]=n=>l.informationSource=n),class:"full-width-input"},{default:t(()=>[(V(!0),j(re,null,ce(pe(H),n=>(V(),de(ae,{key:n.value,label:a.$t(n.label),value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:12},{default:t(()=>[e(d,{title1:"\u4E3B\u8981\u4EA7\u54C1",label:a.$t("companymainproductstitle")},{default:t(()=>[e(b,{type:"textarea",modelValue:l.mainproducts,"onUpdate:modelValue":o[15]||(o[15]=n=>l.mainproducts=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:12},{default:t(()=>[e(d,{title1:"\u6D4B\u8BD5\u9879\u76EE",label:a.$t("corpinfotestprojecttitle")},{default:t(()=>[e(b,{type:"textarea",modelValue:l.testproject,"onUpdate:modelValue":o[16]||(o[16]=n=>l.testproject=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(I,{title1:"\u8BB0\u5F55\u4EBA\u5458","content-position":"left"},{default:t(()=>[u(m(a.$t("companyrecordercodetwotitle")),1)]),_:1}),e(L,{gutter:15,class:"main-align-items-center"},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8BB0\u5F55\u4EBA\u5458",label:a.$t("companyrecordercodetwotitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.recordercodetwo,"onUpdate:modelValue":o[17]||(o[17]=n=>l.recordercodetwo=n),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(y,{span:6},{default:t(()=>[e(d,{title1:"\u8BB0\u5F55\u65F6\u95F4",label:a.$t("companyrecordertimetwotitle")},{default:t(()=>[e(b,{type:"text",modelValue:l.recordertimetwo,"onUpdate:modelValue":o[18]||(o[18]=n=>l.recordertimetwo=n),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["label"]),e(ie,{title1:"\u9644\u4EF6\u4FE1\u606F",label:a.$t("columnAccessoryInformation"),class:"all-height flex-column main-tab-pane-content",name:1},{default:t(()=>[pe(q).get(1)?(V(),de(ee,{key:0,ref_key:"zTable1",ref:P,tableList:te,onLinkDetailbg:we},{tableHeaderLleft:t(n=>[e(w,{size:"small",type:"primary",icon:"UploadFilled",plain:"",onClick:be},{default:t(()=>[u(m(a.$t("menu_upload")),1)]),_:1}),e(w,{size:"small",type:"danger",icon:"DeleteFilled",plain:"",disabled:!n.isSelected,onClick:Ue=>ge(n.ids,n.selectList)},{default:t(()=>[u(m(a.$t("menu_deleteupload")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["tableList"])):Te("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"]),B((V(),j("div",null,[e(X,{modelValue:S.dialogShow,"onUpdate:modelValue":o[20]||(o[20]=n=>S.dialogShow=n),title:a.$t("i18nTrackRecordChooseTrackCustomer"),width:"70%",customclass:"selectCorpForTrackCss",onClose:E},{default:t(()=>[e(Ie,{condobj:S},null,8,["condobj"])]),_:1},8,["modelValue","title"])])),[[se]]),B((V(),j("div",null,[e(X,{modelValue:D.dialogShow,"onUpdate:modelValue":o[21]||(o[21]=n=>D.dialogShow=n),title:a.$t("UPLOAD_uploadFile"),width:"40%",customclass:"uploadAttachmentCss",onClose:_e},{default:t(()=>[e(Ve,{condobj:D},null,8,["condobj"])]),_:1},8,["modelValue","title"])])),[[se]])])}}},Me=ye(Le,[["__scopeId","data-v-64c6f7f1"]]);const je={class:"all-height flex-column main-card",style:{padding:"10px"}},Ye={__name:"potential_track_list",setup(x){const i=ue();me();const h=K("customer_informationsource"),F=K("itemtitlebase_userState"),$=[{label:"corpinfopanelcontacttitle0",value:"0"},{label:"corpinfopanelcontacttitle1",value:"1"},{label:"corpinfopanelcontacttitle2",value:"2"},{label:"corpinfopanelcontacttitle3",value:"3"},{label:"corpinfopanelcontacttitle4",value:"4"}],g=M(),C=z({httpAttribute:{url:"/mylims/trackinfo/track!selectPotentialTrackInfoAllByCond.action",root:"trackInfos",baseParams:{}},tableColumns:[{type:"selection",width:"40"},{title:"\u5BA2\u6237\u540D\u79F0",label:"fieldcolumncustomername",prop:"companyname",type:"Input",width:"260"},{title:"\u72B6\u6001",label:"corpinfopanelzttitle",prop:"state",type:"Select",typeData:F,width:"160"},{title:"\u5BF9STC\u8BA4\u53EF\u5EA6",label:"companyapprovalstctitle",prop:"approvalstc",type:"Input",width:"160"},{title:"\u9009\u62E9\u5B9E\u9A8C\u5BA4\u6700\u5173\u6CE8\u4EC0\u4E48",label:"companylaboratoryfocustitle",prop:"laboratoryfocus",type:"Input",width:"160"},{title:"\u8FC7\u5F80\u4E00\u5E74\u7684\u68C0\u6D4B\u8D39\u7528",label:"companypastyearcoststitle",prop:"pastyearcosts",type:"Input",width:"160"},{title:"\u4E0E\u5176\u4ED6\u5B9E\u9A8C\u5BA4\u7684\u5408\u4F5C\u60C5\u51B5",label:"companycooperationlabstitle",prop:"cooperationlabs",type:"Input",width:"160"},{title:"\u8054\u7CFB\u65F6\u95F4",label:"companyContactTimetitle",prop:"commtime",type:"Date",width:"160"},{title:"\u8054\u7CFB\u7C7B\u522B",label:"companyContactClasstitle",prop:"commtype",type:"Select",typeData:$,width:"160"},{title:"\u8054\u7CFB\u65B9\u5F0F",label:"corpinfopanelcontacttitle",prop:"commway",type:"Input",width:"160"},{title:"\u4E0B\u6B21\u8DDF\u8FDB\u63D0\u9192\u65F6\u95F4",label:"columnremindertime",prop:"remindertime",type:"Date",width:"160"},{title:"\u8054\u7CFB\u4EBA",label:"columnContactPerson",prop:"commclient",type:"Input",width:"160"},{title:"\u804C\u4F4D",label:"companypositiontitle",prop:"position",type:"Input",width:"160"},{title:"\u52A8\u6001\u8DDF\u8FDB\u60C5\u51B5",label:"companyfollowsituationtitle",prop:"followsituation",type:"Input",width:"160"},{title:"\u8FDB\u4E00\u6B65\u8DDF\u8FDB\u65B9\u6CD5/\u52A8\u4F5C",label:"columncustomernextfollow",prop:"nextfollowup",type:"Input",width:"160"},{title:"\u4FE1\u606F\u6765\u6E90",label:"companyinformationSourcetitle",prop:"informationSource",type:"Select",typeData:h,width:"160"},{title:"\u4E3B\u8981\u4EA7\u54C1",label:"companymainproductstitle",prop:"mainproducts",type:"Input",width:"160"},{title:"\u6D4B\u8BD5\u9879\u76EE",label:"corpinfotestprojecttitle",prop:"testproject",type:"Input",width:"160"},{title:"\u8BB0\u5F55\u4EBA\u5458",label:"companyrecordercodetwotitle",prop:"recordercodetwo",type:"Input",width:"160"},{title:"\u8BB0\u5F55\u65F6\u95F4",label:"companyrecordertimetwotitle",prop:"recordertimetwo",type:"DateTime",width:"160"},{title:"\u8FFD\u8E2A\u8BB0\u5F55id",label:"",prop:"commid",type:"id",isHide:!0},{title:"\u5BA2\u6237ID",label:"",prop:"corpid",type:"Input",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"120",isHide:!0},{title:"\u8BB0\u5F55\u4EBA\u5458\u7F16\u7801",label:"",prop:"reocrdercode",type:"Input",width:"160",isHide:!0},{title:"\u8054\u7CFB\u8BB0\u5F55",label:"",prop:"commrecord",type:"Input",width:"160",isHide:!0},{title:"\u8054\u7CFB\u4EBAid",label:"",prop:"contactid",type:"Input",width:"160",isHide:!0},{title:"\u6211\u65B9\u4EBA\u5458SE\u5DE5\u53F7",label:"",prop:"secode",type:"Input",width:"160",isHide:!0},{title:"\u521B\u5EFA\u65F6\u95F4",label:"",prop:"recordertime",type:"DateTime",width:"160",isHide:!0},{title:"\u64CD\u4F5C",label:"itemtitleloginoperation",prop:"operation",type:"operation",fixed:"right"}],tableData:[]}),p=z({dialogShow:!1,commid:"",success:!1,statusType:"new"}),l=()=>{p.commid="",p.statusType="new",p.success=!1,p.dialogShow=!0},H=()=>{p.success&&g.value.getTableList()},N=c=>{p.commid=c.commid,p.statusType="edit",p.success=!1,p.dialogShow=!0},S=c=>{c.commid&&Q("/mylims/trackinfo/track!trackDownloadWord.action","Track.doc",{commid:c.commid})},O=(c,_)=>{for(let s of _){let f=A().format("YYYY-MM-DD"),r=A(new Date(s.recordertimetwo)).format("YYYY-MM-DD");if(f!=r){v.warning(i.t("message_error01"));return}}R.confirm(i.t("Message_Confirmdelete"),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let s={trackInfos:[]};c.forEach(T=>{s.trackInfos.push({commid:T})});let f={jsonString:JSON.stringify(s)};await U.post("/mylims/trackinfo/track!deleteTrackInfo.action",Y.stringify(f))&&(v.success(i.t("Message_deleteSuccess")),g.value.getTableList())})},E=(c,_)=>{if(c.length>1){v.warning(i.t("Message_OnlyCopyOne"));return}R.confirm(i.t("SRM_copynew"),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let s={"cond.oldcommid":c[0]};const f=await U.post("/mylims/trackinfo/track!copyTrackInfo.action",Y.stringify(s));if(f){v.success(i.t("messagemdmcodecopysuccess")),g.value.getTableList();let r=f.trackInfo[0];p.commid=r.commid,p.statusType="new",p.success=!1,p.dialogShow=!0}})},J=c=>{let _=[];for(let s of c)if(s.state=="2"){v.warning(s.companyname+i.t("message_error_customers3"));return}else if(s.state=="1"||s.state=="3"){v.warning(s.companyname+i.t("message_error_customers4"));return}else{let f={};for(let r in s)f[r]=s[r];f.state="2",_.push(f)}R.confirm(i.t("Message_AbandonedYesNo"),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{await U.post("/mylims/trackinfo/track!updateTrackInfo.action",Y.stringify({jsonString:JSON.stringify({trackInfos:_})}))&&(v.success(i.t("Message_OperationSuccess")),g.value.getTableList())})},W=c=>{let _=[];for(let s of c)if(s.state=="1"||s.state=="3")v.warning(s.reocrdercode+i.t("messageEnabledError"));else if(s.state=="0"){v.warning(s.reocrdercode+i.t("message_error_customers5"));return}else{let f={};for(let r in s)f[r]=s[r];f.state="0",_.push(f)}R.confirm(i.t("Message_Enabled"),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{await U.post("/mylims/trackinfo/track!updateTrackInfo.action",Y.stringify({jsonString:JSON.stringify({trackInfos:_})}))&&(v.success(i.t("Message_OperationSuccess")),g.value.getTableList())})};return Z(()=>{g.value.getTableList()}),(c,_)=>{const s=k("el-button"),f=fe("dialogStretching");return V(),j("div",je,[e(ee,{ref_key:"zTable8",ref:g,tableList:C},{tableHeaderLleft:t(r=>[e(s,{size:"small",type:"primary",icon:"Edit",plain:"",onClick:l},{default:t(()=>[u(m(c.$t("menu_new")),1)]),_:1}),e(s,{size:"small",type:"danger",icon:"Delete",plain:"",disabled:!r.isSelected,onClick:T=>O(r.ids,r.selectList)},{default:t(()=>[u(m(c.$t("menu_delete")),1)]),_:2},1032,["disabled","onClick"]),e(s,{size:"small",type:"primary",icon:"DocumentCopy",plain:"",disabled:!r.isSelected,onClick:T=>E(r.ids,r.selectList)},{default:t(()=>[u(m(c.$t("menu_copynew")),1)]),_:2},1032,["disabled","onClick"]),e(s,{size:"small",type:"danger",icon:"WarnTriangleFilled",plain:"",disabled:!r.isSelected,onClick:T=>J(r.selectList)},{default:t(()=>[u(m(c.$t("menu_abandoned")),1)]),_:2},1032,["disabled","onClick"]),e(s,{size:"small",type:"success",icon:"CircleCheckFilled",plain:"",disabled:!r.isSelected,onClick:T=>W(r.selectList)},{default:t(()=>[u(m(c.$t("menu_enable")),1)]),_:2},1032,["disabled","onClick"])]),operation:t(r=>[e(s,{type:"primary",link:"",icon:"Edit",onClick:T=>N(r.row)},{default:t(()=>[u(m(c.$t("menu_edit")),1)]),_:2},1032,["onClick"]),e(s,{type:"primary",link:"",icon:"Download",onClick:T=>S(r.row)},{default:t(()=>[u(m(c.$t("columntrackDownload")),1)]),_:2},1032,["onClick"])]),_:1},8,["tableList"]),B((V(),j("div",null,[e(X,{modelValue:p.dialogShow,"onUpdate:modelValue":_[0]||(_[0]=r=>p.dialogShow=r),title:c.$t("corpinfoTrackrecordtitle"),width:"90%",onClose:H},{default:t(()=>[e(Me,{condobj:p},null,8,["condobj"])]),_:1},8,["modelValue","title"])])),[[f]])])}}},Ae=ye(Ye,[["__scopeId","data-v-2fbc2429"]]);export{Ae as default};
