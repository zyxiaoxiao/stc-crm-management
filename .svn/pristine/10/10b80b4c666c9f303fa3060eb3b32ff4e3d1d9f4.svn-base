import{u as ae,r as d,a as f,w as ne,o as re,g as u,J as O,b as y,c as h,h as o,i,K as k,j as I,t as s,X as K,m as g,l as S,R as D,E as $}from"./index-93018481.js";import{a as J,h as T}from"./util-e879685f.js";import{z as Y,_ as W}from"./ZDialog-43cdd841.js";import{_ as pe}from"./customer_attribution_information-d12a49c5.js";import{c as se}from"./custInfo_user_public-b2ae9603.js";import{_ as ce}from"./_plugin-vue_export-helper-361d09b5.js";import"./moment-da921422.js";import"./fileUtil-a1d39237.js";import"./company_detail_bg_readonly-84aff5a9.js";import"./track_detail-e4407526.js";import"./uploadAttachment-04d897fd.js";const de={class:"all-height flex-column main-card"},ue={class:"filter filter-card"},me={class:"title sle"},be={class:"flex-column flex-1",style:{padding:"0px 0px 0px 10px","overflow-x":"hidden"}},fe={class:"filter filter-card"},ye={class:"title sle"},he={class:"flex-column flex-1",style:{padding:"0px 0px 0px 10px","overflow-x":"hidden"}},ge={__name:"companyInfo_list_company",setup(_e){const a=ae(),z=J("customer_customertype"),N=J("whether");let B=[{label:"tltilecolumndeptlevelbloc",value:"bloc"},{label:"tltilecolumndeptlevelbranch",value:"branch"},{label:"tltilecolumndeptlevelordinary",value:"ordinary"}];const P=d("0"),C=d(),m=d(""),M={children:"children",label:"corpdesc"},x=f([]),r=d(!1);let X={headers:{noLoading:!0}};ne(m,e=>{C.value.filter(e)});const E=(e,t)=>e?t.corpdesc.includes(e):!0,G=async()=>{try{r.value=!0;let e="{'cond.usercode':'admin','cond.parentid':0,'cond.rightflag':'false','cond.checked':false}";const t=await T.post("/core/corp/corp!selectForCorpManage.action",S.stringify(e),X);x.push(t[0])}finally{r.value=!1}},Q=async e=>{r.value=!0,H.httpAttribute.baseParams["cond.departmentcode"]="'"+e.corpcode+"'",await _.value.reuseTableList(),r.value=!1},_=d(),H=f({httpAttribute:{url:"/mylims/enterpriseinfo/enterpriseinfo!selectEnterpriseInfosByCorp.action",root:"enterpriseInfos",baseParams:{"cond.discardflag":"0","cond.special":"0","cond.iscommon_not_y":"Y"}},tableColumns:[{type:"selection",width:"40"},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u65E7\u5BA2\u6237\u53F7",label:"fieldcolumncustomercodeold",prop:"corpnoold",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"panelcolumncustomername",prop:"corpdesc",type:"Link",width:"160"},{title:"\u5BA2\u6237\u7C7B\u522B",label:"corpinfopanelkhlbtitle",prop:"corptype",type:"Select",width:"185",typeData:z},{title:"\u5F52\u5C5E\u7EA7\u522B",label:"columnlevelattribution",prop:"deptlevel",type:"Select",width:"185",typeData:B},{title:"\u5F52\u5C5E\u5206\u516C\u53F8",label:"corpinfoSubordinateToBranchtitle",prop:"branchcorpdesc",type:"Input",width:"200"},{title:"\u5F52\u5C5E\u90E8\u95E8",label:"corpinfopaneldepartmentdesctitle",prop:"departmentdesc",type:"Input",width:"200"},{title:"\u662F\u5426\u9501\u5B9A",label:"itemtitlebase_userlockflag",prop:"lockflag",type:"Select",width:"185",typeData:N},{title:"\u6240\u5C5ESE",label:"columnbaseblongtose",prop:"salesmandesc",type:"Input",width:"200"},{title:"PKM \u5BA2\u6237\u533A\u57DF",label:"customerapplicationinvoice_format",prop:"invoiceformat",type:"Input",width:"160"},{title:"\u4EE3\u7406\u5546\u540D\u79F0",label:"corpinfopaneldlsmctitle",prop:"agentdesc",type:"Input",width:"160"},{title:"\u7535\u8BDD",label:"itemtitlebase_usertel",prop:"corpphone",type:"Input",width:"160"},{title:"\u7535\u5B50\u90AE\u4EF6",label:"corpinfopanelemailtitle",prop:"corpemail",type:"Input",width:"160"},{title:"\u5730\u5740",label:"columnAddress",prop:"corplocation",type:"Input",width:"160"},{title:"\u9500\u552E\u4EE3\u7406\u63D0\u4F63\u70B9(%)",label:"itemtitlefoldersagentbrokerage",prop:"agentbrokerage",type:"Number",width:"208"},{title:"\u521B\u5EFA\u4EBA",label:"corpinfopanelcjrtitle",prop:"recorderdesc",type:"Input",width:"160"},{title:"\u521B\u5EFA\u65F6\u95F4",label:"itemtitlestatusrecordertime",prop:"recordtime",type:"DateTime",width:"160"},{title:"\u8425\u4E1A\u6267\u7167\u6709\u6548\u671F\u81F3",label:"corpinfopanelyyzzyxqztitle",prop:"licensedate",type:"Input",width:"160",isHide:!0},{title:"protection",label:"",prop:"protection",type:"Input",width:"160",isHide:!0},{title:"id",label:"",prop:"corpid",type:"id",width:"60",isHide:!0},{title:"\u53D8\u66F4id",label:"corpinfopanelqyidtitle",prop:"corpbgid",type:"Input",width:"60",isHide:!0},{title:"\u64CD\u4F5C",label:"itemtitleloginoperation",prop:"operation",type:"operation",fixed:"right"}],tableData:[]}),Z=e=>{D.confirm(a.t("Message_AbandonedYesNo"),a.t("reminder"),{confirmButtonText:a.t("menu_ok"),cancelButtonText:a.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let t={jsonString:JSON.stringify({enterpriseInfos:e})};await T.post("/mylims/enterpriseinfo/enterpriseinfo!disusenterpriseInfos.action",S.stringify(t))&&($.success(a.t("Message_OperationSuccess")),_.value.getTableList())})},p=f({dialogShow:!1,corpid:"",arrayList:[]}),ee=e=>{p.arrayList=[],p.corpid=e.corpid,p.dialogShow=!0},te=()=>{let e=p.arrayList;e.length>0&&D.confirm(a.t("Message_RemoveToPublic"),a.t("reminder"),{confirmButtonText:a.t("menu_ok"),cancelButtonText:a.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let t="";for(let w of e)t+=w.corpcode+",";t&&(t=t.substring(0,t.length-1));let c={jsonString:JSON.stringify({corpids:[p.corpid]}),"cond.corpStr":t};await T.post("/mylims/enterpriseinfo/enterpriseinfo!updateCustomerSwitchingPublicInformation.action",S.stringify(c))&&($.success(a.t("Message_OperationSuccess")),_.value.getTableList())})},n=f({dialogShow:!1,corpid:"",tableTabsValue:0}),j=(e,t)=>{n.corpid=t.corpid,n.tableTabsValue=0,n.dialogShow=!0},A=e=>{n.corpid=e.corpid,n.tableTabsValue=8,n.dialogShow=!0},L=d(),F=f({httpAttribute:{url:"/mylims/enterpriseinfo/enterpriseinfo!selectEnterpriseInfosByCorp.action",root:"enterpriseInfos",baseParams:{"cond.discardflag":"1","cond.special":"0"}},tableColumns:[{type:"selection",width:"40"},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u65E7\u5BA2\u6237\u53F7",label:"fieldcolumncustomercodeold",prop:"corpnoold",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"panelcolumncustomername",prop:"corpdesc",type:"Link",width:"160"},{title:"\u5BA2\u6237\u7C7B\u522B",label:"corpinfopanelkhlbtitle",prop:"corptype",type:"Select",width:"185",typeData:z},{title:"\u5F52\u5C5E\u7EA7\u522B",label:"columnlevelattribution",prop:"deptlevel",type:"Select",width:"185",typeData:B},{title:"\u5F52\u5C5E\u5206\u516C\u53F8",label:"corpinfoSubordinateToBranchtitle",prop:"branchcorpdesc",type:"Input",width:"200"},{title:"\u5F52\u5C5E\u90E8\u95E8",label:"corpinfopaneldepartmentdesctitle",prop:"departmentdesc",type:"Input",width:"200"},{title:"\u662F\u5426\u9501\u5B9A",label:"itemtitlebase_userlockflag",prop:"lockflag",type:"Select",width:"185",typeData:N},{title:"\u6240\u5C5ESE",label:"columnbaseblongtose",prop:"salesmandesc",type:"Input",width:"200"},{title:"PKM \u5BA2\u6237\u533A\u57DF",label:"customerapplicationinvoice_format",prop:"invoiceformat",type:"Input",width:"160"},{title:"\u4EE3\u7406\u5546\u540D\u79F0",label:"corpinfopaneldlsmctitle",prop:"agentdesc",type:"Input",width:"160"},{title:"\u7535\u8BDD",label:"itemtitlebase_usertel",prop:"corpphone",type:"Input",width:"160"},{title:"\u7535\u5B50\u90AE\u4EF6",label:"corpinfopanelemailtitle",prop:"corpemail",type:"Input",width:"160"},{title:"\u5730\u5740",label:"columnAddress",prop:"corplocation",type:"Input",width:"160"},{title:"\u9500\u552E\u4EE3\u7406\u63D0\u4F63\u70B9(%)",label:"itemtitlefoldersagentbrokerage",prop:"agentbrokerage",type:"Number",width:"208"},{title:"\u521B\u5EFA\u4EBA",label:"corpinfopanelcjrtitle",prop:"recorderdesc",type:"Input",width:"160"},{title:"\u521B\u5EFA\u65F6\u95F4",label:"itemtitlestatusrecordertime",prop:"recordtime",type:"DateTime",width:"160"},{title:"\u5E9F\u5F03\u4EBA",label:"corpinfopanelfqrdesctitle",prop:"abandonederdesc",type:"Input",width:"160"},{title:"\u5E9F\u5F03\u65F6\u95F4",label:"corpinfopanelfqtimetitle",prop:"abandonedertime",type:"DateTime",width:"160"},{title:"\u5E9F\u5F03\u4EBA\u7F16\u7801",label:"corpinfopanelfqrcodetitle",prop:"abandonedercode",type:"Input",width:"60",isHide:!0},{title:"\u8425\u4E1A\u6267\u7167\u6709\u6548\u671F\u81F3",label:"corpinfopanelyyzzyxqztitle",prop:"licensedate",type:"Input",width:"160",isHide:!0},{title:"protection",label:"",prop:"protection",type:"Input",width:"160",isHide:!0},{title:"id",label:"",prop:"corpid",type:"id",width:"60",isHide:!0},{title:"\u53D8\u66F4id",label:"corpinfopanelqyidtitle",prop:"corpbgid",type:"Input",width:"60",isHide:!0},{title:"\u64CD\u4F5C",label:"itemtitleloginoperation",prop:"operation",type:"operation",fixed:"right"}],tableData:[]}),le=async e=>{r.value=!0,F.httpAttribute.baseParams["cond.departmentcode"]="'"+e.corpcode+"'",await L.value.reuseTableList(),r.value=!1},oe=e=>{D.confirm(a.t("Message_Enabled"),a.t("reminder"),{confirmButtonText:a.t("menu_ok"),cancelButtonText:a.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let t={jsonString:JSON.stringify({enterpriseInfos:e})};await T.post("/mylims/enterpriseinfo/enterpriseinfo!invocationenterpriseInfos.action",S.stringify(t))&&($.success(a.t("Message_OperationSuccess")),L.value.getTableList())})};return re(()=>{G()}),(e,t)=>{const c=u("el-input"),V=u("el-tree"),w=u("el-scrollbar"),b=u("el-button"),U=u("el-tab-pane"),ie=u("el-tabs"),q=O("loading"),R=O("dialogStretching");return y(),h("div",de,[o(ie,{class:"flex-column flex-1 main-card-tabs",modelValue:P.value,"onUpdate:modelValue":t[2]||(t[2]=l=>P.value=l)},{default:i(()=>[o(U,{title1:"\u90E8\u95E8\u5BA2\u6237",label:e.$t("menubaseCorporateclient"),class:"main-tab-pane-content all-height flex-row",name:"0"},{default:i(()=>[k((y(),h("div",ue,[I("h4",me,s(e.$t("itemtitlebase_usercorpdesc")),1),o(c,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l),placeholder:e.$t("enterKeywordsForFiltering"),formatter:l=>l.toUpperCase(),clearable:""},null,8,["modelValue","placeholder","formatter"]),o(w,{style:K({height:"calc(100% - 80px)"})},{default:i(()=>[o(V,{ref_key:"treeRef",ref:C,"default-expand-all":"","node-key":"id",data:x,"highlight-current":!0,props:M,"filter-node-method":E,onNodeClick:Q},null,8,["data"])]),_:1},8,["style"])])),[[q,r.value]]),I("div",be,[o(Y,{ref_key:"zTable1",ref:_,tableList:H,onLinkDetailbg:j},{tableHeaderLleft:i(l=>[o(b,{size:"small",type:"danger",icon:"WarnTriangleFilled",plain:"",disabled:!l.isSelected,onClick:v=>Z(l.selectList)},{default:i(()=>[g(s(e.$t("menu_abandoned")),1)]),_:2},1032,["disabled","onClick"])]),operation:i(l=>[o(b,{type:"primary",link:"",icon:"Edit",onClick:v=>A(l.row)},{default:i(()=>[g(s(e.$t("corpinfoTrackrecordtitle")),1)]),_:2},1032,["onClick"]),o(b,{type:"primary",link:"",icon:"FolderRemove",onClick:v=>ee(l.row)},{default:i(()=>[g(s(e.$t("menu_removeToPublic")),1)]),_:2},1032,["onClick"])]),_:1},8,["tableList"])])]),_:1},8,["label"]),o(U,{title1:"\u90E8\u95E8\u5E9F\u5F03\u5BA2\u6237\u67E5\u8BE2",label:e.$t("menubaseCorporateclientdiscarded"),class:"main-tab-pane-content all-height flex-row",name:"1"},{default:i(()=>[k((y(),h("div",fe,[I("h4",ye,s(e.$t("itemtitlebase_usercorpdesc")),1),o(c,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=l=>m.value=l),placeholder:e.$t("enterKeywordsForFiltering"),formatter:l=>l.toUpperCase(),clearable:""},null,8,["modelValue","placeholder","formatter"]),o(w,{style:K({height:"calc(100% - 80px)"})},{default:i(()=>[o(V,{ref_key:"treeRef",ref:C,"default-expand-all":"","node-key":"id",data:x,"highlight-current":!0,props:M,"filter-node-method":E,onNodeClick:le},null,8,["data"])]),_:1},8,["style"])])),[[q,r.value]]),I("div",he,[o(Y,{ref_key:"zTable2",ref:L,tableList:F,onLinkDetailbg:j},{tableHeaderLleft:i(l=>[o(b,{size:"small",type:"success",icon:"CircleCheckFilled",plain:"",disabled:!l.isSelected,onClick:v=>oe(l.selectList)},{default:i(()=>[g(s(e.$t("menu_enable")),1)]),_:2},1032,["disabled","onClick"])]),operation:i(l=>[o(b,{type:"primary",link:"",icon:"Edit",onClick:v=>A(l.row)},{default:i(()=>[g(s(e.$t("corpinfoTrackrecordtitle")),1)]),_:2},1032,["onClick"])]),_:1},8,["tableList"])])]),_:1},8,["label"])]),_:1},8,["modelValue"]),k((y(),h("div",null,[o(W,{modelValue:p.dialogShow,"onUpdate:modelValue":t[3]||(t[3]=l=>p.dialogShow=l),width:"95%",onClose:te},{default:i(()=>[o(pe,{condobj:p},null,8,["condobj"])]),_:1},8,["modelValue"])])),[[R]]),k((y(),h("div",null,[o(W,{modelValue:n.dialogShow,"onUpdate:modelValue":t[4]||(t[4]=l=>n.dialogShow=l),title:"",width:"95%"},{default:i(()=>[o(se,{condobj:n},null,8,["condobj"])]),_:1},8,["modelValue"])])),[[R]])])}}},$e=ce(ge,[["__scopeId","data-v-5739559f"]]);export{$e as default};
