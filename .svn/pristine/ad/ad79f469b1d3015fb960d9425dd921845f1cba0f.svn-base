import{M as j,T as D,_ as A}from"./tabs-66f4c800.js";import{l as G,d as R,r as y,a as z,o as $,b as I,c as M,u as P,G as U,e as O,f as H,w as J,g as h,h as a,i as c,j as u,k as K,m as N,t as V,F as Q,E as L,n as W,p as X,q as Y}from"./index-93018481.js";import{h as Z,g as ee}from"./util-e879685f.js";import{_ as q}from"./_plugin-vue_export-helper-361d09b5.js";const oe="/assets/png/login_backround3-2cb84a3a.png",te=_=>Z.post("/core/login/login!login.action",G.stringify(_)),ne=R({name:"SIdentify"}),se=Object.assign(ne,{setup(_,{expose:i}){const p=y(null),o=z({pool:"1234567890",width:120,height:40,imgCode:""});i({state:o}),$(()=>{o.imgCode=d()});const f=()=>{o.imgCode=d()},s=(e,r)=>parseInt(Math.random()*(r-e)+e),g=(e,r)=>{const t=s(e,r),v=s(e,r),C=s(e,r);return`rgb(${t},${v},${C})`},d=()=>{const e=p.value.getContext("2d");e.fillStyle=g(180,230),e.fillRect(0,0,o.width,o.height);let r="";for(let t=0;t<4;t++){const v=o.pool[s(0,o.pool.length)];r+=v;const C=s(40,40),b=s(-30,30);e.font=C+"px Simhei",e.textBaseline="top",e.fillStyle=g(80,150),e.save(),e.translate(30*t+15,15),e.rotate(b*Math.PI/180),e.fillText(v,-15+5,-15),e.restore()}for(let t=0;t<1;t++)e.beginPath(),e.moveTo(s(0,o.width),s(0,o.height)),e.lineTo(s(0,o.width),s(0,o.height)),e.strokeStyle=g(180,230),e.closePath(),e.stroke();for(let t=0;t<40;t++)e.beginPath(),e.arc(s(0,o.width),s(0,o.height),1,0,2*Math.PI),e.closePath(),e.fillStyle=g(150,200),e.fill();return r};return(e,r)=>(I(),M("canvas",{ref_key:"verify",ref:p,width:"120",height:"40",onClick:f},null,512))}});const le={style:{display:"flex",width:"100%"}},ae={class:"login-btn"},ie={__name:"LoginForm",setup(_){const i=P(),p=U(),o=j(),f=D(),s=y(!1),g=O(),d=y(),e=y(),r=H(()=>({username:[{required:!0,message:i.t("portalcheckusernamenull"),trigger:"blur"}],password:[{required:!0,message:i.t("portalcheckpassword"),trigger:"blur"}],validateCode:[{required:!0,message:i.t("portalcheckvalidateCodeMsg"),trigger:"blur"}]})),t=z({username:"",password:"",validateCode:""}),v=l=>{!l||l.resetFields()};J(()=>i.locale.value,(l,n)=>{setTimeout(()=>{v(d.value)},10)});const C=()=>{let n=new Date().getHours();if(n>=0&&n<=10)return i.t("goodMorning")+" \u26C5";if(n>=10&&n<=14)return i.t("goodNoon")+" \u{1F31E}";if(n>=14&&n<=18)return i.t("goodAfternoon")+" \u{1F31E}";if(n>=18&&n<=24)return i.t("goodEvening")+" \u{1F31B}"},b=l=>{!l||l.validate(async n=>{if(n){if(t.validateCode!=e.value.state.imgCode){L.warning(i.t("portalcheckvalidateCodeMsgerr"));return}s.value=!0;try{const k={"loginInfo.usercode":t.username,"loginInfo.userpass":t.password},m=await te(k);m.loginMessage=="success"?(o.setMenuList([]),f.closeMultipleTab(),p.setUserInfo(m.loginInfo[0]),p.setToken(m.loginInfo[0].userid),W({title:C(),message:i.t("loginSuccess"),type:"success",duration:3e3}),g.push({name:"home"})):L.warning(m.loginMessage)}finally{s.value=!1}}})};return $(()=>{document.onkeydown=l=>{if(l=window.event||l,l.code==="Enter"||l.code==="enter"){if(s.value)return;b(d.value)}}}),(l,n)=>{const k=h("user"),m=h("el-icon"),x=h("el-input"),S=h("el-form-item"),F=h("lock"),E=h("el-form"),T=h("el-button");return I(),M(Q,null,[a(E,{ref_key:"loginFormRef",ref:d,model:t,rules:K(r),size:"large"},{default:c(()=>[a(S,{prop:"username"},{default:c(()=>[a(x,{modelValue:t.username,"onUpdate:modelValue":n[0]||(n[0]=w=>t.username=w),placeholder:l.$t("itemtitleloginusername")},{prefix:c(()=>[a(m,{class:"el-input__icon"},{default:c(()=>[a(k)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(S,{prop:"password"},{default:c(()=>[a(x,{type:"password",modelValue:t.password,"onUpdate:modelValue":n[1]||(n[1]=w=>t.password=w),placeholder:l.$t("menhupassword"),"show-password":"",autocomplete:"new-password"},{prefix:c(()=>[a(m,{class:"el-input__icon"},{default:c(()=>[a(F)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(S,{prop:"validateCode"},{default:c(()=>[u("div",le,[a(x,{modelValue:t.validateCode,"onUpdate:modelValue":n[2]||(n[2]=w=>t.validateCode=w),placeholder:l.$t("itemtitleVerificationCode")},{prefix:c(()=>[a(m,{class:"el-input__icon"},{default:c(()=>[a(F)]),_:1})]),_:1},8,["modelValue","placeholder"]),a(se,{ref_key:"identifyRef",ref:e},null,512)])]),_:1})]),_:1},8,["model","rules"]),u("div",ae,[a(T,{icon:"CircleClose",round:"",onClick:n[3]||(n[3]=w=>v(d.value)),size:"large"},{default:c(()=>[N(V(l.$t("buttoncommonreset")),1)]),_:1}),a(T,{icon:"UserFilled",round:"",onClick:n[4]||(n[4]=w=>b(d.value)),size:"large",type:"primary",loading:s.value},{default:c(()=>[N(V(l.$t("tipbaselogin")),1)]),_:1},8,["loading"])])],64)}}},re=q(ie,[["__scopeId","data-v-c2efc71d"]]);const B=_=>(X("data-v-e30736d1"),_=_(),Y(),_),ce={class:"login-container flx-center"},de={class:"login-back flx-center"},ue={class:"login-box"},ge=B(()=>u("div",{class:"login-left"},[u("img",{src:oe,alt:"login",style:{}})],-1)),_e={class:"login-right"},pe={class:"login-logo"},fe=B(()=>u("img",{class:"login-icon",src:A,alt:""},null,-1)),me={class:"logo-text"},he={class:"login-form"},ve=R({name:"login"}),we=Object.assign(ve,{setup(_){const i=P(),p=U(),o=y("zh"),f=y(!1),s=g=>{g?(o.value="en",f.value=!0):(o.value="zh",f.value=!1),i.locale.value=o.value,p.updateLanguage(o.value)};return $(()=>{o.value=p.language||ee(),s(o.value=="en")}),(g,d)=>{const e=h("el-switch");return I(),M("div",ce,[u("div",de,[u("div",ue,[a(e,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=r=>f.value=r),class:"language","inline-prompt":"","active-text":"\u4E2D","inactive-text":"EN",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#409eff"},onChange:s},null,8,["modelValue"]),ge,u("div",_e,[u("div",pe,[fe,u("p",me,V(g.$t("logoText")),1)]),u("div",he,[a(re,{ref:"loginRef"},null,512)])])])])])}}}),xe=q(we,[["__scopeId","data-v-e30736d1"]]);export{xe as default};
