import{u as O,r as m,a as p,o as U,g as b,J,b as f,c as k,h as l,i as a,m as d,t as u,K as L,R as v,l as g,E as T}from"./index-93018481.js";import{h as w}from"./util-e879685f.js";import{z as E,_ as $}from"./ZDialog-43cdd841.js";import{_ as P}from"./index-55024d44.js";import{_ as q}from"./enterpriselock_detail_new-04c025e7.js";import"./_plugin-vue_export-helper-361d09b5.js";import"./fileUtil-a1d39237.js";import"./uploadAttachment-04d897fd.js";const K={class:"all-height flex-column main-card"},le={__name:"enterpriselock_application_query_list",setup(W){const n=O(),D=[{type:"selection",width:"40"},{title:"\u72B6\u6001",label:"itemtitlecommondesc11",prop:"processflag",type:"workflowStatus",width:"70"},{title:"id",label:"",prop:"lockid",type:"id",width:"60",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"panelcolumncustomername",prop:"corpdesc",type:"Input",width:"260"},{title:"AR\u91D1\u989D",label:"enterpriselockinfoARAmounttitle_hkd",prop:"arcount",type:"Number",width:"160"},{title:"\u89E3\u9501\u539F\u56E0",label:"enterpriselockinfoUnlockReasontitle",prop:"unlockreason",type:"Input"},{title:"\u521B\u5EFA\u4EBA",label:"corpinfopanelcjrtitle",prop:"recorderdesc",type:"Input",width:"160"},{title:"\u521B\u5EFA\u65F6\u95F4",label:"itemtitlestatusrecordertime",prop:"recordtime",type:"DateTime",width:"160"},{title:"\u64CD\u4F5C",label:"itemtitleloginoperation",prop:"operation",type:"operation",fixed:"right"},{title:"corpid",label:"",prop:"corpid",type:"Input",width:"160",isHide:!0},{title:"recordercode",label:"",prop:"recordercode",type:"Input",width:"160",isHide:!0}],s=m(),V=p({httpAttribute:{url:"/crm/enterpriselock/enterpriselock!selectEnterpriselockInfoByCond.action",root:"enterpriselockInfos",baseParams:{"cond.auditflag":"0"}},tableColumns:D,tableData:[]}),h=m(),N=p({httpAttribute:{url:"/crm/enterpriselock/enterpriselock!selectEnterpriselockInfoByCondRight.action",root:"enterpriselockInfos",baseParams:{"cond.auditflag":"0"}},tableColumns:[{type:"selection",width:"40"},{title:"\u72B6\u6001",label:"itemtitlecommondesc11",prop:"processflag",type:"workflowStatus",width:"70"},{title:"id",label:"",prop:"lockid",type:"id",width:"60",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"panelcolumncustomername",prop:"corpdesc",type:"Link",width:"260"},{title:"AR\u91D1\u989D",label:"enterpriselockinfoARAmounttitle_hkd",prop:"arcount",type:"Number",width:"160"},{title:"\u89E3\u9501\u539F\u56E0",label:"enterpriselockinfoUnlockReasontitle",prop:"unlockreason",type:"Input"},{title:"\u521B\u5EFA\u4EBA",label:"corpinfopanelcjrtitle",prop:"recorderdesc",type:"Input",width:"160"},{title:"\u521B\u5EFA\u65F6\u95F4",label:"itemtitlestatusrecordertime",prop:"recordtime",type:"DateTime",width:"160"},{title:"corpid",label:"",prop:"corpid",type:"Input",width:"160",isHide:!0},{title:"recordercode",label:"",prop:"recordercode",type:"Input",width:"160",isHide:!0}],tableData:[]}),r=p({dialogShow:!1,codeid:"",tablename:"MLS_ENTERPRISELOCK",columnid:"lockid"}),y=(t,o)=>{r.codeid=o[r.columnid],r.dialogShow=!0},e=p({dialogShow:!1,success:!1,lockid:"",readonly:!0,workflowflag:1}),R=()=>{e.dialogShow=!0,e.success=!1,e.lockid="",e.readonly=!1,e.workflowflag=1},x=t=>{e.dialogShow=!0,e.success=!1,e.lockid=t.lockid,e.readonly=!1,e.workflowflag=1},z=()=>{e.success&&s.value.getTableList()},B=t=>{v.confirm(n.t("Message_Confirmdelete"),n.t("reminder"),{confirmButtonText:n.t("menu_ok"),cancelButtonText:n.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{await w.post("/crm/enterpriselock/enterpriselock!deleteEnterpriselockInfo.action",g.stringify({jsonString:JSON.stringify({enterpriselockInfos:t})}))&&(T.success(n.t("Message_deleteSuccess")),s.value.getTableList())})},A=async t=>{await w.post("/crm/enterpriselock/enterpriselock!checkIsExistEnterpriselockInfo.action",g.stringify({jsonString:JSON.stringify({enterpriselockInfos:t})})),v.confirm(n.t("Message_ConfirmOrNotSubmit"),n.t("reminder"),{confirmButtonText:n.t("menu_ok"),cancelButtonText:n.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{await w.post("/crm/enterpriselock/enterpriselock!submit.action",g.stringify({jsonString:JSON.stringify({enterpriselockInfos:t})}))&&(T.success(n.t("Message_OperationSuccess")),s.value.getTableList())})},M=(t,o)=>{e.dialogShow=!0,e.success=!1,e.lockid=o.lockid,e.readonly=!0},_=m("0"),j=t=>{switch(t){case"0":s.value.getTableList();break;case"1":h.value.getTableList();break}};return U(()=>{s.value.getTableList()}),(t,o)=>{const c=b("el-button"),S=b("el-tab-pane"),H=b("el-tabs"),I=J("dialogStretching");return f(),k("div",K,[l(H,{class:"flex-column flex-1 main-card-tabs",modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=i=>_.value=i),onTabChange:j},{default:a(()=>[l(S,{title1:"\u5BA2\u6237\u89E3\u9501\u7533\u8BF7",label:t.$t("panelCustomerreleaseapplication"),class:"main-tab-pane-content all-height flex-column",name:"0"},{default:a(()=>[l(E,{ref_key:"zTable1",ref:s,tableList:V,onWorkflowStatus:y},{tableHeaderLleft:a(i=>[l(c,{size:"small",type:"primary",icon:"Edit",plain:"",onClick:R},{default:a(()=>[d(u(t.$t("menu_new")),1)]),_:1}),l(c,{size:"small",type:"danger",icon:"Delete",plain:"",disabled:!i.isSelected,onClick:C=>B(i.selectList)},{default:a(()=>[d(u(t.$t("menu_delete")),1)]),_:2},1032,["disabled","onClick"]),l(c,{size:"small",type:"success",icon:"Check",plain:"",disabled:!i.isSelected,onClick:C=>A(i.selectList)},{default:a(()=>[d(u(t.$t("menu_submit")),1)]),_:2},1032,["disabled","onClick"])]),operation:a(i=>[l(c,{type:"primary",link:"",icon:"Edit",onClick:C=>x(i.row)},{default:a(()=>[d(u(t.$t("menu_edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["tableList"])]),_:1},8,["label"]),l(S,{title1:"\u5BA2\u6237\u89E3\u9501\u7533\u8BF7\u67E5\u8BE2",label:t.$t("panelUnlockrequestquery"),class:"main-tab-pane-content all-height flex-column",name:"1"},{default:a(()=>[l(E,{ref_key:"zTable2",ref:h,tableList:N,onWorkflowStatus:y,onLinkDetailbg:M},null,8,["tableList"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),L((f(),k("div",null,[l($,{modelValue:r.dialogShow,"onUpdate:modelValue":o[1]||(o[1]=i=>r.dialogShow=i),title:t.$t("menu_auditOpinion"),width:"95%"},{default:a(()=>[l(P,{auditList:r},null,8,["auditList"])]),_:1},8,["modelValue","title"])])),[[I]]),L((f(),k("div",null,[l($,{modelValue:e.dialogShow,"onUpdate:modelValue":o[2]||(o[2]=i=>e.dialogShow=i),width:"95%",onClose:z},{default:a(()=>[l(q,{condobj:e},null,8,["condobj"])]),_:1},8,["modelValue"])])),[[I]])])}}};export{le as default};
