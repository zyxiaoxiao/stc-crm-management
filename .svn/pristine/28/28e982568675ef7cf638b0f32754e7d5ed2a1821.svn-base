import{u as A,r as m,a as b,o as B,g as k,J as x,b as g,c as _,h as a,i,m as w,t as h,K as T,R as O,S as U,a0 as M,l as N,E as P}from"./index-93018481.js";import{h as H}from"./util-e879685f.js";import{z as I,_ as V}from"./ZDialog-43cdd841.js";import{_ as q}from"./index-55024d44.js";import{_ as J}from"./enterpriselock_detail_new-04c025e7.js";import"./_plugin-vue_export-helper-361d09b5.js";import"./fileUtil-a1d39237.js";import"./uploadAttachment-04d897fd.js";const K={class:"all-height flex-column main-card"},le={__name:"enterpriselock_verify_query_list",setup(Q){const u=A(),y=[{type:"selection",width:"40"},{title:"\u72B6\u6001",label:"itemtitlecommondesc11",prop:"processflag",type:"workflowStatus",width:"70"},{title:"id",label:"",prop:"lockid",type:"id",width:"60",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"panelcolumncustomername",prop:"corpdesc",type:"Link",width:"260"},{title:"AR\u91D1\u989D",label:"enterpriselockinfoARAmounttitle_hkd",prop:"arcount",type:"Number",width:"160"},{title:"\u89E3\u9501\u539F\u56E0",label:"enterpriselockinfoUnlockReasontitle",prop:"unlockreason",type:"Input"},{title:"\u521B\u5EFA\u4EBA",label:"corpinfopanelcjrtitle",prop:"recorderdesc",type:"Input",width:"160"},{title:"\u521B\u5EFA\u65F6\u95F4",label:"itemtitlestatusrecordertime",prop:"recordtime",type:"DateTime",width:"160"},{title:"corpid",label:"",prop:"corpid",type:"Input",width:"160",isHide:!0},{title:"recordercode",label:"",prop:"recordercode",type:"Input",width:"160",isHide:!0}],r=m(),$=b({httpAttribute:{url:"/crm/enterpriselock/enterpriselock!selectEnterpriselockInfosByCorpRightOnly.action",root:"enterpriselockInfos",baseParams:{"cond.auditflag":"1"}},tableColumns:y,tableData:[]}),S=m(),j=b({httpAttribute:{url:"/crm/enterpriselock/enterpriselock!selectEnterpriselockInfoQueryByCond.action",root:"enterpriselockInfos",baseParams:{}},tableColumns:y,tableData:[]}),n=b({dialogShow:!1,codeid:"",tablename:"MLS_ENTERPRISELOCK",columnid:"lockid"}),v=(l,t)=>{n.codeid=t[n.columnid],n.dialogShow=!0},e=b({dialogShow:!1,success:!1,lockid:"",readonly:!0,workflowflag:2}),E=(l,t)=>{e.dialogShow=!0,e.success=!1,e.lockid=t.lockid,e.readonly=!0,e.workflowflag=2},z=()=>{e.success&&r.value.getTableList()},f=(l,t,c)=>{let s=m(t);O({title:u.t("Message_PleaeEnterAuditOpinion"),message:()=>U(M,{modelValue:s.value,type:"textarea",autosize:{minRows:4},"onUpdate:modelValue":d=>{s.value=d}}),showCancelButton:!0,confirmButtonText:u.t("menu_ok"),cancelButtonText:u.t("menu_cancel")}).then(async()=>{let d={enterpriselockInfos:c},p={jsonString:JSON.stringify(d),"cond.opinion":s.value};await H.post(l,N.stringify(p))&&(P.success(u.t("Message_OperationSuccess")),r.value.getTableList())})},D=(l,t)=>{e.dialogShow=!0,e.success=!1,e.lockid=t.lockid,e.readonly=!0,e.workflowflag=3},L=m("0"),R=l=>{switch(l){case"0":r.value.getTableList();break;case"1":S.value.getTableList();break}};return B(()=>{r.value.getTableList()}),(l,t)=>{const c=k("el-button"),s=k("el-tab-pane"),d=k("el-tabs"),p=x("dialogStretching");return g(),_("div",K,[a(d,{class:"flex-column flex-1 main-card-tabs",modelValue:L.value,"onUpdate:modelValue":t[0]||(t[0]=o=>L.value=o),onTabChange:R},{default:i(()=>[a(s,{title1:"\u5BA2\u6237\u89E3\u9501\u5BA1\u6838",label:l.$t("panelUnlockcustomerreview"),class:"main-tab-pane-content all-height flex-column",name:"0"},{default:i(()=>[a(I,{ref_key:"zTable1",ref:r,tableList:$,onWorkflowStatus:v,onLinkDetailbg:E},{tableHeaderLleft:i(o=>[a(c,{size:"small",type:"success",icon:"Check",plain:"",disabled:!o.isSelected,onClick:C=>f("/crm/enterpriselock/enterpriselock!approve.action","Approve !",o.selectList)},{default:i(()=>[w(h(l.$t("menu_approve")),1)]),_:2},1032,["disabled","onClick"]),a(c,{size:"small",type:"danger",icon:"Close",plain:"",disabled:!o.isSelected,onClick:C=>f("/crm/enterpriselock/enterpriselock!reject.action","Reject !",o.selectList)},{default:i(()=>[w(h(l.$t("menu_reject")),1)]),_:2},1032,["disabled","onClick"]),a(c,{size:"small",type:"danger",icon:"Close",plain:"",disabled:!o.isSelected,onClick:C=>f("/crm/enterpriselock/enterpriselock!reject2Submitor.action","Reject !",o.selectList)},{default:i(()=>[w(h(l.$t("menu_reject2Submitor")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["tableList"])]),_:1},8,["label"]),a(s,{title1:"\u5BA2\u6237\u89E3\u9501\u5BA1\u6838\u67E5\u8BE2",label:l.$t("panelUnlockauditclientinquiry"),class:"main-tab-pane-content all-height flex-column",name:"1"},{default:i(()=>[a(I,{ref_key:"zTable2",ref:S,tableList:j,onWorkflowStatus:v,onLinkDetailbg:D},null,8,["tableList"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),T((g(),_("div",null,[a(V,{modelValue:n.dialogShow,"onUpdate:modelValue":t[1]||(t[1]=o=>n.dialogShow=o),title:l.$t("menu_auditOpinion"),width:"95%"},{default:i(()=>[a(q,{auditList:n},null,8,["auditList"])]),_:1},8,["modelValue","title"])])),[[p]]),T((g(),_("div",null,[a(V,{modelValue:e.dialogShow,"onUpdate:modelValue":t[2]||(t[2]=o=>e.dialogShow=o),width:"95%",onClose:z},{default:i(()=>[a(J,{condobj:e},null,8,["condobj"])]),_:1},8,["modelValue"])])),[[p]])])}}};export{le as default};
