import{r as L,a as j,o as te,g as w,b as C,c as M,h as e,i as l,m as p,t as m,u as ue,G as fe,J as be,j as Se,K as R,P as X,F as ce,D as de,I as pe,k as me,N as Ve,l as Y,E as V,R as O}from"./index-93018481.js";import{a as Q,h as U}from"./util-e879685f.js";import{z as le,_ as Z}from"./ZDialog-43cdd841.js";import{h as H}from"./moment-da921422.js";import{d as ee}from"./fileUtil-a1d39237.js";import{_ as Ce}from"./uploadAttachment-04d897fd.js";import{_ as ye}from"./_plugin-vue_export-helper-361d09b5.js";const Te={class:"all-height flex-column"},Ie={__name:"selectCorpForTrack",props:{condobj:Object},setup(A){const i=A,g=L(),B=j({isRadio:!0,httpAttribute:{url:"/mylims/enterpriseinfo/enterpriseinfo!selectCustomerForTrackCustomer.action",root:"enterpriseInfos",baseParams:{"cond.auditflag":"2","cond.newcustomtype":"SE","cond.discardflag":"0"}},tableColumns:[{type:"selection",width:"40"},{title:"\u5BA2\u6237ID",label:"companycorpidtitle",prop:"corpid",type:"id",width:"60",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"columnCustomerName",prop:"corpdesc",type:"Input"},{title:"\u82F1\u6587\u540D\u79F0",label:"hotlinkpanelywmctitle",prop:"corpenglishname",type:"Input",width:"180"},{title:"\u522B\u540D",label:"corpinfopanelbmtitle",prop:"corpalias",type:"Input",width:"160"},{title:"\u7535\u5B50\u90AE\u4EF6",label:"corpinfopanelbmtitle",prop:"corpinfopanelemailtitle",type:"Input",width:"160"},{title:"\u5730\u5740",label:"columnAddress",prop:"corplocation",type:"Input"},{title:"newcustomtype",label:"",prop:"newcustomtype",type:"Input",width:"160",isHide:!0}],tableData:[]});te(()=>{g.value.getTableList()});const I=($,_)=>{i.condobj.arrayList=_,i.condobj.dialogShow=!1};return($,_)=>{const z=w("el-button");return C(),M("div",Te,[e(le,{ref_key:"zTable1",ref:g,tableList:B},{tableHeaderLleft:l(t=>[e(z,{size:"small",type:"primary",icon:"Finished",plain:"",disabled:!t.isSelected,onClick:P=>I(t.ids,t.selectList)},{default:l(()=>[p(m($.$t("buttoncommonconfirm")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["tableList"])])}}};const $e={class:"all-height flex-column"},De={style:{margin:"10px","text-align":"right"}},Le={__name:"track_detail_new",props:{condobj:Object},setup(A){const i=A,g=ue(),B=fe(),I=L(!0),$=L(!0),_=L(!0),z=L(),t=j({corpid:"",commid:i.condobj.commid,companyname:"",corpno:"",approvalstc:"",laboratoryfocus:"",pastyearcosts:0,cooperationlabs:"",commtime:"",commtype:"",commway:"",position:"",remindertime:"",commclient:"",followsituation:"",nextfollowup:"",informationSource:"",mainproducts:"",testproject:"",reocrdercode:"",recordercodetwo:"",recordertimetwo:"",state:""});(!t.commid||i.condobj.statusType=="new")&&(_.value=!1);const P=Q("customer_informationsource"),E=[{label:"corpinfopanelcontacttitle0",value:"0"},{label:"corpinfopanelcontacttitle1",value:"1"},{label:"corpinfopanelcontacttitle2",value:"2"},{label:"corpinfopanelcontacttitle3",value:"3"},{label:"corpinfopanelcontacttitle4",value:"4"}],h=j({dialogShow:!1,arrayList:[]}),J=()=>{h.arrayList=[],h.dialogShow=!0},W=()=>{h.arrayList.length>0&&(t.corpid=h.arrayList[0].corpid,t.corpno=h.arrayList[0].corpno,t.companyname=h.arrayList[0].corpdesc)},q=async()=>{let a={"cond.commid":t.commid};const o=await U.post("/mylims/trackinfo/track!selectTrackInfoById.action",Y.stringify(a));x(o),F()},G=a=>{!a||a.validate(async(o,y)=>{if(o){let T={trackInfo:t},b={jsonString:JSON.stringify(T),"cond.corpid":t.corpid};const c=await U.post("/mylims/trackinfo/track!saveTrackInfo.action",Y.stringify(b));c&&(V.success(g.t("Message_saveSuccess")),i.condobj.success=!0,x(c),F())}else V.warning(g.t("message_form_validation"))})},x=a=>{for(let o in a.trackInfo[0])Object.keys(t).includes(o)&&(o=="pastyearcosts"?t[o]=a.trackInfo[0][o]*1:t[o]=a.trackInfo[0][o])},F=()=>{let a=H().format("YYYY-MM-DD"),o=H(new Date(t.recordertimetwo)).format("YYYY-MM-DD"),y=B.userInfo.usercode;t.reocrdercode==y&&a==o?($.value=!0,I.value=!0):(I.value=!1,$.value=!1)},r=()=>{t.commid&&ee("/mylims/trackinfo/track!trackDownloadWord.action","Track.doc",{commid:t.commid})},S=()=>{k("/mylims/trackinfo/track!selectPreviousTrackInfo.action")},d=()=>{k("/mylims/trackinfo/track!selectNextTrackInfo.action")},k=async a=>{if(t.commid){let o={commid:t.commid};const y=await U.post(a,Y.stringify(o));x(y),F()}},s=L(),f=j({isRequest:!0,tableToolbar:{right:!1},httpAttribute:{url:"/core/upload/upload!selectfilesInfoByCond.action",root:"fileInfos",baseParams:{"cond.reservnum":t.commid}},tableColumns:[{type:"selection",width:"40"},{title:"id",label:"id",prop:"fileid",type:"id",width:"60",isHide:!0},{title:"\u6587\u6863\u540D\u79F0",label:"columnjxFileName",prop:"filename",type:"Link"},{title:"\u6587\u6863\u5927\u5C0F",label:"companypanel3filesizetitle",prop:"filesize",type:"Input",width:"160"},{title:"\u6269\u5C55\u540D",label:"companypanel3extensiontitle",prop:"extension",type:"Input",width:"120"},{title:"\u4E0A\u4F20\u7528\u6237",label:"columnUploadUser",prop:"recorderdesc",type:"Input",width:"120"},{title:"\u4E0A\u4F20\u65F6\u95F4",label:"columnUploadTime",prop:"recordertime",type:"Input",width:"300"},{title:"mdmfileid",label:"",prop:"mdmfileid",type:"Input",width:"300",isHide:!0},{title:"businesstype",label:"",prop:"businesstype",type:"Input",width:"120",isHide:!0}],tableData:[]}),v=j({uploadUrl:"",uploadParameter:{},dialogShow:!1,success:!1}),N=()=>{v.uploadUrl="http://localhost:3000/apis/core/uploadnew/upload!upload.action",v.uploadParameter={jsonString:"{uploadFile:{businesscode:'CRM/accessory', businessobjectid:'"+t.commid+"'}}","cond.commid":t.commid},v.success=!1,v.dialogShow=!0},_e=()=>{v.success&&s.value.getTableList()},we=(a,o)=>{ee("/core/uploadnew/upload!download.action",o.filename,{"cond.crm":"crm","cond.fileid":o.fileid})},ge=(a,o)=>{O.confirm(g.t("Message_Confirmdelete"),g.t("reminder"),{confirmButtonText:g.t("menu_ok"),cancelButtonText:g.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let y={fileInfos:[]};o.forEach(c=>{y.fileInfos.push({fileid:c.fileid,mdmfileid:c.mdmfileid})});let T={jsonString:JSON.stringify(y),"cond.crm":"crm"};await U.post("/core/uploadnew/upload!deleteUploadFileInfo.action",Y.stringify(T))&&(V({type:"success",message:g.t("Message_deleteSuccess")}),s.value.getTableList())})},oe=L(0),K=new Map([[1,!1]]),ke=a=>{$.value&&(I.value=a==0),t.commid&&(f.httpAttribute.baseParams["cond.reservnum"]=t.commid,i.condobj.statusType=="edit"&&(_.value=a==0),K.get(a)?s.value.reuseTableList():K.set(a,!0))};return te(()=>{t.commid&&q()}),(a,o)=>{const y=w("el-button"),T=w("el-divider"),b=w("el-input"),c=w("el-form-item"),u=w("el-col"),D=w("el-row"),ae=w("el-date-picker"),ne=w("el-option"),ie=w("el-select"),ve=w("el-form"),se=w("el-tab-pane"),he=w("el-tabs"),re=be("dialogStretching");return C(),M("div",$e,[Se("div",De,[R(e(y,{size:"small",type:"primary",icon:"Document",plain:"",onClick:o[0]||(o[0]=n=>G(z.value))},{default:l(()=>[p(m(a.$t("menu_save")),1)]),_:1},512),[[X,I.value]]),R(e(y,{size:"small",type:"info",icon:"ArrowLeft",plain:"",onClick:S},{default:l(()=>[p(m(a.$t("SRM_btnPrevious")),1)]),_:1},512),[[X,_.value]]),R(e(y,{size:"small",type:"info",icon:"ArrowRight",plain:"",onClick:d},{default:l(()=>[p(m(a.$t("SRM_btnNext")),1)]),_:1},512),[[X,_.value]]),e(y,{size:"small",type:"primary",icon:"Download",plain:"",onClick:r},{default:l(()=>[p(m(a.$t("SRM_btnDownload")),1)]),_:1})]),e(he,{class:"flex-column flex-1",style:{overflow:"auto"},modelValue:oe.value,"onUpdate:modelValue":o[19]||(o[19]=n=>oe.value=n),type:"border-card",onTabChange:ke},{default:l(()=>[e(se,{title1:"\u8FFD\u8E2A\u8BB0\u5F55",label:a.$t("corpinfoTrackrecordtitle"),name:0},{default:l(()=>[e(ve,{style:{margin:"0px 15px"},"label-position":"right","label-width":"120px",model:t,ref_key:"ruleFormRef",ref:z},{default:l(()=>[e(T,{title1:"\u8FFD\u8E2A\u5BA2\u6237","content-position":"left"},{default:l(()=>[p(m(a.$t("corpinfoTrackcustomertitle")),1)]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(c,{title1:"\u5BA2\u6237\u540D\u79F0",label:a.$t("fieldcolumncustomername")},{default:l(()=>[e(b,{type:"text",modelValue:t.companyname,"onUpdate:modelValue":o[1]||(o[1]=n=>t.companyname=n),modelModifiers:{trim:!0},readonly:""},{append:l(()=>[e(y,{icon:"Search",onClick:J})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{title1:"\u57FA\u672C\u60C5\u51B5","content-position":"left"},{default:l(()=>[p(m(a.$t("companyBasicsituationtitle")),1)]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(c,{title1:"\u5BF9STC\u8BA4\u53EF\u5EA6",label:a.$t("companyapprovalstctitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.approvalstc,"onUpdate:modelValue":o[2]||(o[2]=n=>t.approvalstc=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u9009\u62E9\u5B9E\u9A8C\u5BA4\u6700\u5173\u6CE8\u4EC0\u4E48",label:a.$t("companylaboratoryfocustitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.laboratoryfocus,"onUpdate:modelValue":o[3]||(o[3]=n=>t.laboratoryfocus=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8FC7\u5F80\u4E00\u5E74\u7684\u68C0\u6D4B\u8D39\u7528",label:a.$t("companypastyearcoststitle"),prop:"pastyearcosts",rules:[{type:"number",message:a.$t("mustbeanumber")}]},{default:l(()=>[e(b,{type:"text",modelValue:t.pastyearcosts,"onUpdate:modelValue":o[4]||(o[4]=n=>t.pastyearcosts=n),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label","rules"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u4E0E\u5176\u4ED6\u5B9E\u9A8C\u5BA4\u7684\u5408\u4F5C\u60C5\u51B5",label:a.$t("companycooperationlabstitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.cooperationlabs,"onUpdate:modelValue":o[5]||(o[5]=n=>t.cooperationlabs=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{title1:"\u8DDF\u8E2A\u4FE1\u606F","content-position":"left"},{default:l(()=>[p(m(a.$t("corpinfoTrackinginformationtitle")),1)]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8054\u7CFB\u65F6\u95F4",label:a.$t("companyContactTimetitle")},{default:l(()=>[e(ae,{modelValue:t.commtime,"onUpdate:modelValue":o[6]||(o[6]=n=>t.commtime=n),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8054\u7CFB\u7C7B\u522B",label:a.$t("companyContactClasstitle")},{default:l(()=>[e(ie,{modelValue:t.commtype,"onUpdate:modelValue":o[7]||(o[7]=n=>t.commtype=n),class:"full-width-input"},{default:l(()=>[(C(),M(ce,null,de(E,n=>e(ne,{key:n.value,label:a.$t(n.label),value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8054\u7CFB\u65B9\u5F0F",label:a.$t("corpinfopanelcontacttitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.commway,"onUpdate:modelValue":o[8]||(o[8]=n=>t.commway=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u804C\u4F4D",label:a.$t("companypositiontitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.position,"onUpdate:modelValue":o[9]||(o[9]=n=>t.position=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(c,{title1:"\u4E0B\u6B21\u8DDF\u8FDB\u63D0\u9192\u65F6\u95F4",label:a.$t("columnremindertime")},{default:l(()=>[e(ae,{modelValue:t.remindertime,"onUpdate:modelValue":o[10]||(o[10]=n=>t.remindertime=n),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8054\u7CFB\u4EBA",label:a.$t("columnContactPerson")},{default:l(()=>[e(b,{type:"text",modelValue:t.commclient,"onUpdate:modelValue":o[11]||(o[11]=n=>t.commclient=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(c,{title1:"\u52A8\u6001\u8DDF\u8FDB\u60C5\u51B5",label:a.$t("companyfollowsituationtitle")},{default:l(()=>[e(b,{type:"textarea",modelValue:t.followsituation,"onUpdate:modelValue":o[12]||(o[12]=n=>t.followsituation=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:12},{default:l(()=>[e(c,{title1:"\u8FDB\u4E00\u6B65\u8DDF\u8FDB\u65B9\u6CD5/\u52A8\u4F5C",label:a.$t("columncustomernextfollow")},{default:l(()=>[e(b,{type:"textarea",modelValue:t.nextfollowup,"onUpdate:modelValue":o[13]||(o[13]=n=>t.nextfollowup=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{title1:"\u9879\u76EE\u4FE1\u606F","content-position":"left"},{default:l(()=>[p(m(a.$t("corpinfoProjectinformationtitle")),1)]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(c,{title1:"\u4FE1\u606F\u6765\u6E90",label:a.$t("companyinformationSourcetitle")},{default:l(()=>[e(ie,{modelValue:t.informationSource,"onUpdate:modelValue":o[14]||(o[14]=n=>t.informationSource=n),class:"full-width-input"},{default:l(()=>[(C(!0),M(ce,null,de(me(P),n=>(C(),pe(ne,{key:n.value,label:a.$t(n.label),value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(c,{title1:"\u4E3B\u8981\u4EA7\u54C1",label:a.$t("companymainproductstitle")},{default:l(()=>[e(b,{type:"textarea",modelValue:t.mainproducts,"onUpdate:modelValue":o[15]||(o[15]=n=>t.mainproducts=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:12},{default:l(()=>[e(c,{title1:"\u6D4B\u8BD5\u9879\u76EE",label:a.$t("corpinfotestprojecttitle")},{default:l(()=>[e(b,{type:"textarea",modelValue:t.testproject,"onUpdate:modelValue":o[16]||(o[16]=n=>t.testproject=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{title1:"\u8BB0\u5F55\u4EBA\u5458","content-position":"left"},{default:l(()=>[p(m(a.$t("companyrecordercodetwotitle")),1)]),_:1}),e(D,{gutter:15,class:"main-align-items-center"},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8BB0\u5F55\u4EBA\u5458",label:a.$t("companyrecordercodetwotitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.recordercodetwo,"onUpdate:modelValue":o[17]||(o[17]=n=>t.recordercodetwo=n),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(u,{span:6},{default:l(()=>[e(c,{title1:"\u8BB0\u5F55\u65F6\u95F4",label:a.$t("companyrecordertimetwotitle")},{default:l(()=>[e(b,{type:"text",modelValue:t.recordertimetwo,"onUpdate:modelValue":o[18]||(o[18]=n=>t.recordertimetwo=n),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["label"]),e(se,{title1:"\u9644\u4EF6\u4FE1\u606F",label:a.$t("columnAccessoryInformation"),class:"all-height flex-column main-tab-pane-content",name:1},{default:l(()=>[me(K).get(1)?(C(),pe(le,{key:0,ref_key:"zTable1",ref:s,tableList:f,onLinkDetailbg:we},{tableHeaderLleft:l(n=>[e(y,{size:"small",type:"primary",icon:"UploadFilled",plain:"",onClick:N},{default:l(()=>[p(m(a.$t("menu_upload")),1)]),_:1}),e(y,{size:"small",type:"danger",icon:"DeleteFilled",plain:"",disabled:!n.isSelected,onClick:Ue=>ge(n.ids,n.selectList)},{default:l(()=>[p(m(a.$t("menu_deleteupload")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["tableList"])):Ve("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"]),R((C(),M("div",null,[e(Z,{modelValue:h.dialogShow,"onUpdate:modelValue":o[20]||(o[20]=n=>h.dialogShow=n),title:a.$t("i18nTrackRecordChooseTrackCustomer"),width:"70%",customclass:"selectCorpForTrackCss",onClose:W},{default:l(()=>[e(Ie,{condobj:h},null,8,["condobj"])]),_:1},8,["modelValue","title"])])),[[re]]),R((C(),M("div",null,[e(Z,{modelValue:v.dialogShow,"onUpdate:modelValue":o[21]||(o[21]=n=>v.dialogShow=n),title:a.$t("UPLOAD_uploadFile"),width:"40%",customclass:"uploadAttachmentCss",onClose:_e},{default:l(()=>[e(Ce,{condobj:v},null,8,["condobj"])]),_:1},8,["modelValue","title"])])),[[re]])])}}},Me=ye(Le,[["__scopeId","data-v-b8bbcb18"]]);const je={class:"all-height flex-column main-card",style:{padding:"10px"}},Ye={__name:"track_list",setup(A){const i=ue(),g=fe(),B=Q("customer_informationsource"),I=Q("itemtitlebase_userState"),$=[{label:"corpinfopanelcontacttitle0",value:"0"},{label:"corpinfopanelcontacttitle1",value:"1"},{label:"corpinfopanelcontacttitle2",value:"2"},{label:"corpinfopanelcontacttitle3",value:"3"},{label:"corpinfopanelcontacttitle4",value:"4"}],_=L(),z=j({httpAttribute:{url:"/mylims/trackinfo/track!selectTrackInfoAllByCond.action",root:"trackInfos",baseParams:{}},tableColumns:[{type:"selection",width:"40"},{title:"\u8FFD\u8E2A\u8BB0\u5F55id",label:"",prop:"commid",type:"id",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"120"},{title:"\u5BA2\u6237\u540D\u79F0",label:"fieldcolumncustomername",prop:"companyname",type:"Input",width:"260"},{title:"\u72B6\u6001",label:"corpinfopanelzttitle",prop:"state",type:"Select",typeData:I,width:"160"},{title:"\u5BF9STC\u8BA4\u53EF\u5EA6",label:"companyapprovalstctitle",prop:"approvalstc",type:"Input",width:"160"},{title:"\u9009\u62E9\u5B9E\u9A8C\u5BA4\u6700\u5173\u6CE8\u4EC0\u4E48",label:"companylaboratoryfocustitle",prop:"laboratoryfocus",type:"Input",width:"160"},{title:"\u8FC7\u5F80\u4E00\u5E74\u7684\u68C0\u6D4B\u8D39\u7528",label:"companypastyearcoststitle",prop:"pastyearcosts",type:"Input",width:"160"},{title:"\u4E0E\u5176\u4ED6\u5B9E\u9A8C\u5BA4\u7684\u5408\u4F5C\u60C5\u51B5",label:"companycooperationlabstitle",prop:"cooperationlabs",type:"Input",width:"160"},{title:"\u8054\u7CFB\u65F6\u95F4",label:"companyContactTimetitle",prop:"commtime",type:"Date",width:"160"},{title:"\u8054\u7CFB\u7C7B\u522B",label:"companyContactClasstitle",prop:"commtype",type:"Select",typeData:$,width:"160"},{title:"\u8054\u7CFB\u65B9\u5F0F",label:"corpinfopanelcontacttitle",prop:"commway",type:"Input",width:"160"},{title:"\u4E0B\u6B21\u8DDF\u8FDB\u63D0\u9192\u65F6\u95F4",label:"columnremindertime",prop:"remindertime",type:"Date",width:"160"},{title:"\u8054\u7CFB\u4EBA",label:"columnContactPerson",prop:"commclient",type:"Input",width:"160"},{title:"\u804C\u4F4D",label:"companypositiontitle",prop:"position",type:"Input",width:"160"},{title:"\u52A8\u6001\u8DDF\u8FDB\u60C5\u51B5",label:"companyfollowsituationtitle",prop:"followsituation",type:"Input",width:"160"},{title:"\u8FDB\u4E00\u6B65\u8DDF\u8FDB\u65B9\u6CD5/\u52A8\u4F5C",label:"columncustomernextfollow",prop:"nextfollowup",type:"Input",width:"160"},{title:"\u4FE1\u606F\u6765\u6E90",label:"companyinformationSourcetitle",prop:"informationSource",type:"Select",typeData:B,width:"160"},{title:"\u4E3B\u8981\u4EA7\u54C1",label:"companymainproductstitle",prop:"mainproducts",type:"Input",width:"160"},{title:"\u6D4B\u8BD5\u9879\u76EE",label:"corpinfotestprojecttitle",prop:"testproject",type:"Input",width:"160"},{title:"\u8BB0\u5F55\u4EBA\u5458",label:"companyrecordercodetwotitle",prop:"recordercodetwo",type:"Input",width:"160"},{title:"\u8BB0\u5F55\u4EBA\u5458\u7F16\u7801",label:"",prop:"reocrdercode",type:"Input",width:"160",isHide:!0},{title:"\u8BB0\u5F55\u65F6\u95F4",label:"companyrecordertimetwotitle",prop:"recordertimetwo",type:"DateTime",width:"160"},{title:"\u64CD\u4F5C",label:"itemtitleloginoperation",prop:"operation",type:"operation",fixed:"right"}],tableData:[]}),t=j({dialogShow:!1,commid:"",success:!1,statusType:"new"}),P=()=>{t.commid="",t.statusType="new",t.success=!1,t.dialogShow=!0},E=()=>{t.success&&_.value.getTableList()},h=r=>{t.commid=r.commid,t.statusType="edit",t.success=!1,t.dialogShow=!0},J=r=>{r.commid&&ee("/mylims/trackinfo/track!trackDownloadWord.action","Track.doc",{commid:r.commid})},W=(r,S)=>{for(let d of S)if(d.reocrdercode!=g.userInfo.usercode){V.warning(i.t("SRM_operationTrack"));return}else{let k=H().format("YYYY-MM-DD"),s=H(new Date(d.recordertimetwo)).format("YYYY-MM-DD");if(k!=s){V.warning(i.t("message_error01"));return}}O.confirm(i.t("Message_Confirmdelete"),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let d={trackInfos:[]};r.forEach(f=>{d.trackInfos.push({commid:f})});let k={jsonString:JSON.stringify(d)};await U.post("/mylims/trackinfo/track!deleteTrackInfo.action",Y.stringify(k))&&(V.success(i.t("Message_deleteSuccess")),_.value.getTableList())})},q=(r,S)=>{if(r.length>1){V.warning(i.t("Message_OnlyCopyOne"));return}if(S[0].reocrdercode!=g.userInfo.usercode){V.warning(i.t("SRM_operationTrack"));return}O.confirm(i.t("SRM_copynew"),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let d={"cond.oldcommid":r[0]};const k=await U.post("/mylims/trackinfo/track!copyTrackInfo.action",Y.stringify(d));if(k){V.success(i.t("messagemdmcodecopysuccess")),_.value.getTableList();let s=k.trackInfo[0];t.commid=s.commid,t.statusType="new",t.success=!1,t.dialogShow=!0}})},G=r=>{F(r,"2","message_error_customers3","Message_AbandonedYesNo")},x=r=>{F(r,"0","message_error_customers5","Message_Enabled")},F=(r,S,d,k)=>{let s=[];for(let f of r)if(f.state==S){V.warning(f.companyname+i.t(d));return}else{let v={};for(let N in f)v[N]=f[N];v.state=S,s.push(v)}O.confirm(i.t(k),i.t("reminder"),{confirmButtonText:i.t("menu_ok"),cancelButtonText:i.t("menu_cancel"),type:"warning",draggable:!0}).then(async()=>{let f={jsonString:JSON.stringify({trackInfos:s})};await U.post("/mylims/trackinfo/track!updateTrackInfo.action",Y.stringify(f))&&(V.success(i.t("Message_OperationSuccess")),_.value.getTableList())})};return te(()=>{_.value.getTableList()}),(r,S)=>{const d=w("el-button"),k=be("dialogStretching");return C(),M("div",je,[e(le,{ref_key:"zTable8",ref:_,tableList:z},{tableHeaderLleft:l(s=>[e(d,{size:"small",type:"primary",icon:"Edit",plain:"",onClick:P},{default:l(()=>[p(m(r.$t("menu_new")),1)]),_:1}),e(d,{size:"small",type:"danger",icon:"Delete",plain:"",disabled:!s.isSelected,onClick:f=>W(s.ids,s.selectList)},{default:l(()=>[p(m(r.$t("menu_delete")),1)]),_:2},1032,["disabled","onClick"]),e(d,{size:"small",type:"primary",icon:"DocumentCopy",plain:"",disabled:!s.isSelected,onClick:f=>q(s.ids,s.selectList)},{default:l(()=>[p(m(r.$t("menu_copynew")),1)]),_:2},1032,["disabled","onClick"]),e(d,{size:"small",type:"danger",icon:"WarnTriangleFilled",plain:"",disabled:!s.isSelected,onClick:f=>G(s.selectList)},{default:l(()=>[p(m(r.$t("menu_abandoned")),1)]),_:2},1032,["disabled","onClick"]),e(d,{size:"small",type:"success",icon:"CircleCheckFilled",plain:"",disabled:!s.isSelected,onClick:f=>x(s.selectList)},{default:l(()=>[p(m(r.$t("menu_enable")),1)]),_:2},1032,["disabled","onClick"])]),operation:l(s=>[e(d,{type:"primary",link:"",icon:"Edit",onClick:f=>h(s.row)},{default:l(()=>[p(m(r.$t("menu_edit")),1)]),_:2},1032,["onClick"]),e(d,{type:"primary",link:"",icon:"Download",onClick:f=>J(s.row)},{default:l(()=>[p(m(r.$t("columntrackDownload")),1)]),_:2},1032,["onClick"])]),_:1},8,["tableList"]),R((C(),M("div",null,[e(Z,{modelValue:t.dialogShow,"onUpdate:modelValue":S[0]||(S[0]=s=>t.dialogShow=s),title:r.$t("corpinfoTrackrecordtitle"),width:"90%",onClose:E},{default:l(()=>[e(Me,{condobj:t},null,8,["condobj"])]),_:1},8,["modelValue","title"])])),[[k]])])}}},Ne=ye(Ye,[["__scopeId","data-v-4101fa46"]]);export{Ne as default};
