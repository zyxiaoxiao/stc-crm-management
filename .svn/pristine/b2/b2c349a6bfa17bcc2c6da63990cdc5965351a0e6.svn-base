import{u as B,r as b,a as m,o as E,g as h,J as O,b as _,c as g,h as l,i as o,m as w,t as y,K as T,R as x,S as R,a0 as H,l as M,E as N}from"./index-93018481.js";import{h as A}from"./util-e879685f.js";import{z as D,_ as V}from"./ZDialog-43cdd841.js";import{_ as P}from"./index-55024d44.js";import{_ as U}from"./customer_distribution_detail-ff6c95ee.js";import"./_plugin-vue_export-helper-361d09b5.js";const J={class:"all-height flex-column main-card"},Y={__name:"companyInfo_audit_list_distribution",setup(Q){const u=B(),S=[{type:"selection",width:"40"},{title:"\u72B6\u6001",label:"itemtitlecommondesc11",prop:"processflag",type:"workflowStatus",width:"70"},{title:"id",label:"companycorpidtitle",prop:"id",type:"id",width:"60",isHide:!0},{title:"\u5BA2\u6237\u53F7",label:"fieldcolumncustomercode",prop:"corpno",type:"Input",width:"160"},{title:"\u65E7\u5BA2\u6237\u53F7",label:"fieldcolumncustomercodeold",prop:"corpnoold",type:"Input",width:"160"},{title:"\u5BA2\u6237\u540D\u79F0",label:"panelcolumncustomername",prop:"corpdesc",type:"Link",width:"260"},{title:"\u9500\u552E\u4EBA\u5458/\u5BA2\u670D",label:"itemtitleSalesservice",prop:"salesmandesc",type:"Input",width:"160"},{title:"\u5F52\u5C5E\u5206\u516C\u53F8",label:"corpinfoSubordinateToBranchtitle",prop:"branchcorpdesc",type:"Input",width:"260"},{title:"\u5F52\u5C5E\u90E8\u95E8",label:"corpinfopaneldepartmentdesctitle",prop:"departmentdesc",type:"Input",width:"200"},{title:"\u521B\u5EFA\u4EBA",label:"corpinfopanelcjrtitle",prop:"recorderdesc",type:"Input",width:"160"},{title:"\u521B\u5EFA\u65F6\u95F4",label:"itemtitlestatusrecordertime",prop:"recordertime",type:"DateTime",width:"160"},{title:"corpid",label:"",prop:"corpid",type:"Input",width:"160",isHide:!0},{title:"recordercode",label:"",prop:"recordercode",type:"Input",width:"160",isHide:!0},{title:"corpnofirst",label:"",prop:"corpnofirst",type:"Input",width:"160",isHide:!0},{title:"corpnolast",label:"",prop:"corpnolast",type:"Input",width:"160",isHide:!0}],c=b(),$=m({httpAttribute:{url:"/crm/distribution/distribution!selectDistributionInfoByCond.action",root:"distributionInfos",baseParams:{"cond.auditflag":"1"}},tableColumns:S,tableData:[]}),v=b(),j=m({httpAttribute:{url:"/crm/distribution/distribution!selectDistributionInfoByCond.action",root:"distributionInfos",baseParams:{"cond.auditflag":"1,2"}},tableColumns:S,tableData:[]}),n=m({dialogShow:!1,codeid:"",tablename:"MLS_ENTERPRISE_DISTRIBUTION",columnid:"id"}),k=(e,i)=>{n.codeid=i[n.columnid],n.dialogShow=!0},a=m({dialogShow:!1,success:!1,readonly:!0,id:""}),I=(e,i)=>{a.dialogShow=!0,a.success=!1,a.id=i.id,a.readonly=!0},L=b("0"),z=e=>{switch(e){case"0":c.value.getTableList();break;case"1":v.value.getTableList();break}},f=(e,i,r)=>{let s=b(i);x({title:u.t("Message_PleaeEnterAuditOpinion"),message:()=>R(H,{modelValue:s.value,type:"textarea",autosize:{minRows:4},"onUpdate:modelValue":d=>{s.value=d}}),showCancelButton:!0,confirmButtonText:u.t("menu_ok"),cancelButtonText:u.t("menu_cancel")}).then(async()=>{let d={distributionInfos:r},p={jsonString:JSON.stringify(d),"cond.opinion":s.value};await A.post(e,M.stringify(p))&&(N.success(u.t("Message_OperationSuccess")),c.value.getTableList())})};return E(()=>{c.value.getTableList()}),(e,i)=>{const r=h("el-button"),s=h("el-tab-pane"),d=h("el-tabs"),p=O("dialogStretching");return _(),g("div",J,[l(d,{class:"flex-column flex-1 main-card-tabs",modelValue:L.value,"onUpdate:modelValue":i[0]||(i[0]=t=>L.value=t),onTabChange:z},{default:o(()=>[l(s,{title1:"\u5BA2\u6237\u5206\u914D\u5BA1\u6838",label:e.$t("panelbaseauditDistributionOfCustomers"),class:"main-tab-pane-content all-height flex-column",name:"0"},{default:o(()=>[l(D,{ref_key:"zTable1",ref:c,tableList:$,onWorkflowStatus:k,onLinkDetailbg:I},{tableHeaderLleft:o(t=>[l(r,{size:"small",type:"success",icon:"Check",plain:"",disabled:!t.isSelected,onClick:C=>f("/crm/distribution/distribution!approvedistribution.action","Approve !",t.selectList)},{default:o(()=>[w(y(e.$t("menu_approve")),1)]),_:2},1032,["disabled","onClick"]),l(r,{size:"small",type:"danger",icon:"Close",plain:"",disabled:!t.isSelected,onClick:C=>f("/crm/distribution/distribution!rejectdistribution.action","Reject !",t.selectList)},{default:o(()=>[w(y(e.$t("menu_reject")),1)]),_:2},1032,["disabled","onClick"]),l(r,{size:"small",type:"danger",icon:"Close",plain:"",disabled:!t.isSelected,onClick:C=>f("/crm/distribution/distribution!rejectbg2Submitordistribution.action","Reject !",t.selectList)},{default:o(()=>[w(y(e.$t("menu_reject2Submitor")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["tableList"])]),_:1},8,["label"]),l(s,{title1:"\u5BA2\u6237\u5206\u914D\u5BA1\u6838\u67E5\u8BE2",label:e.$t("paneltitleauditDistributionOfCustomersQuery"),class:"main-tab-pane-content all-height flex-column",name:"1"},{default:o(()=>[l(D,{ref_key:"zTable2",ref:v,tableList:j,onWorkflowStatus:k,onLinkDetailbg:I},null,8,["tableList"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),T((_(),g("div",null,[l(V,{modelValue:n.dialogShow,"onUpdate:modelValue":i[1]||(i[1]=t=>n.dialogShow=t),title:e.$t("menu_auditOpinion"),width:"95%"},{default:o(()=>[l(P,{auditList:n},null,8,["auditList"])]),_:1},8,["modelValue","title"])])),[[p]]),T((_(),g("div",null,[l(V,{modelValue:a.dialogShow,"onUpdate:modelValue":i[2]||(i[2]=t=>a.dialogShow=t),width:"95%"},{default:o(()=>[l(U,{condobj:a},null,8,["condobj"])]),_:1},8,["modelValue"])])),[[p]])])}}};export{Y as default};
